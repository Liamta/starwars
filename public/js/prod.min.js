!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return r(n?n:e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){function i(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],2:[function(e,t,n){(function(e){!function(){"use strict";function i(e){return d.test(e)||h.test(e)?e+"th":p.test(e)?e.replace(p,"ieth"):w.test(e)?e.replace(w,r):e}function r(e,t){return v[t]}function o(e){var t=parseInt(e,10);if(!c(t))throw new TypeError("Not a finite number: "+e+" ("+typeof e+")");var n=String(t),i=n.charAt(n.length-1);return n+("1"===i?"st":"2"===i?"nd":"3"===i?"rd":"th")}function a(e,t){var n,r=parseInt(e,10);if(!c(r))throw new TypeError("Not a finite number: "+e+" ("+typeof e+")");return n=s(r),t?i(n):n}function s(e){var t,n,i=arguments[1];return 0===e?i?i.join(" ").replace(/,$/,""):"zero":(i||(i=[]),0>e&&(i.push("minus"),e=Math.abs(e)),20>e?(t=0,n=k[e]):m>e?(t=e%g,n=T[Math.floor(e/g)],t&&(n+="-"+k[t],t=0)):b>e?(t=e%m,n=s(Math.floor(e/m))+" hundred"):y>e?(t=e%b,n=s(Math.floor(e/b))+" thousand,"):x>e?(t=e%y,n=s(Math.floor(e/y))+" million,"):M>e?(t=e%x,n=s(Math.floor(e/x))+" billion,"):A>e?(t=e%M,n=s(Math.floor(e/M))+" trillion,"):z>=e&&(t=e%A,n=s(Math.floor(e/A))+" quadrillion,"),i.push(n),s(t,i))}function u(e){var t=a(e);return i(t)}var l="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this,f=c,c=Number.isFinite||function(e){return"number"==typeof e&&f(e)},d=/(hundred|thousand|(m|b|tr|quadr)illion)$/,h=/teen$/,p=/y$/,w=/(zero|one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve)$/,v={zero:"zeroth",one:"first",two:"second",three:"third",four:"fourth",five:"fifth",six:"sixth",seven:"seventh",eight:"eighth",nine:"ninth",ten:"tenth",eleven:"eleventh",twelve:"twelfth"},g=10,m=100,b=1e3,y=1e6,x=1e9,M=1e12,A=1e15,z=9007199254740992,k=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],T=["zero","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],I={toOrdinal:o,toWords:a,toWordsOrdinal:u};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=I),n.numberToWords=I):l.numberToWords=I}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){for(var i=e("performance-now"),r="undefined"==typeof window?{}:window,o=["moz","webkit"],a="AnimationFrame",s=r["request"+a],u=r["cancel"+a]||r["cancelRequest"+a],l=0;l<o.length&&!s;l++)s=r[o[l]+"Request"+a],u=r[o[l]+"Cancel"+a]||r[o[l]+"CancelRequest"+a];if(!s||!u){var f=0,c=0,d=[],h=1e3/60;s=function(e){if(0===d.length){var t=i(),n=Math.max(0,h-(t-f));f=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(f)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return d.push({handle:++c,callback:e,cancelled:!1}),c},u=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}t.exports=function(e){return s.call(r,e)},t.exports.cancel=function(){u.apply(r,arguments)}},{"performance-now":4}],4:[function(e,t,n){(function(e){(function(){var n,i,r;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-r)/1e6},i=e.hrtime,n=function(){var e;return e=i(),1e9*e[0]+e[1]},r=n()):Date.now?(t.exports=function(){return Date.now()-r},r=Date.now()):(t.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)}).call(this,e("oMfpAn"))},{oMfpAn:1}],5:[function(e,t,n){t.exports=function(e){function t(){n.time=0}var n={inUse:!1,time:0,definition:e,play:t};return n}},{}],6:[function(e,t,n){t.exports=function(e,t,n,i){var r={owner:i,isAlive:!0,damage:1,size:2,velocity:15,color:"rebel"===i.faction?"rgba(255, 69, 0, 0.8)":"rgba(0, 204, 0, 0.8)",x:e,y:t,vx:0,vy:0};return r.vx=Math.cos(n)*r.velocity,r.vy=Math.sin(n)*r.velocity,{attributes:r}}},{}],7:[function(e,t,n){var i=e("./Bullet"),r=e("../utils/AudioManager");t.exports=function(e){function t(e){var t=new i(e.x,e.y,e.currentAngle,e);d.push(t),c=d.length}function n(){for(var t=0;c>t;t++){var n=d[t];e.beginPath(),e.strokeStyle=n.attributes.color,e.lineWidth=2,e.moveTo(n.attributes.x,n.attributes.y),e.lineTo(n.attributes.x+1.6*n.attributes.vx,n.attributes.y+1.6*n.attributes.vy),e.stroke()}}function o(){for(var e=0;c>e;e++){var t=d[e];t.attributes.x+=t.attributes.vx,t.attributes.y+=t.attributes.vy,(t.attributes.x<-50||t.attributes.x>l+50||t.attributes.y<-50||t.attributes.y>f+50)&&(t.attributes.isAlive=!1)}}function a(){for(var e=c;e>0;e--)d[e-1].attributes.isAlive||(d.splice(e-1,1),c--)}function s(){l=window.innerWidth,f=window.innerHeight}function u(e){for(var t=0;c>t;t++)e(d[t],t)}var l,f,c=(new r,0),d=[];return{create:t,draw:n,update:o,resize:s,remove:a,each:u}}},{"../utils/AudioManager":16,"./Bullet":6}],8:[function(e,t,n){t.exports=function(){var e={size:Math.random(),speed:Math.random()/5,color:"rgba(255, 255, 255,"+Math.random()+")",x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,vx:20*Math.random()-10,vy:20*Math.random()-10};return{attributes:e}}},{}],9:[function(e,t,n){var i=e("./Particle");t.exports=function(e){function t(){e.fillStyle="#000",e.fillRect(0,0,o,a);for(var t=0;s>t;t++){var n=u[t];e.beginPath(),e.fillStyle=n.attributes.color,e.arc(n.attributes.x,n.attributes.y,n.attributes.size,2*Math.PI,!1),e.fill()}}function n(){for(var e=0;s>e;e++){var t=u[e];t.attributes.x+=t.attributes.vx*t.attributes.speed/10,t.attributes.y+=t.attributes.vy*t.attributes.speed/10,t.attributes.x<-50?t.attributes.x=o+50:t.attributes.x>o+50&&(t.attributes.x=-50),t.attributes.y<-50?t.attributes.y=a+50:t.attributes.y>a+50&&(t.attributes.y=-50)}}function r(){o=window.innerWidth,a=window.innerHeight}for(var o,a,s=750,u=[],l=0;s>l;l++){var f=new i;u.push(f)}return{draw:t,update:n,resize:r}}},{"./Particle":8}],10:[function(e,t,n){var i=e("../utils/Helpers");t.exports=function(e,t,n,r,o){function a(e){switch(e.keyCode){case n.up:g.up=!0;break;case n.down:g.down=!0;break;case n.left:g.left=!0;break;case n.right:g.right=!0;break;case n.shoot:g.shoot=!0}}function s(e){switch(e.keyCode){case n.up:g.up=!1;break;case n.down:g.down=!1;break;case n.left:g.left=!1;break;case n.right:g.right=!1;break;case n.shoot:g.shoot=!1}}function u(){v.isAlive=!1,v.lives--,v.respawnTimer=300}function l(){v.isAlive=!0,v.health=v.healthMax,v.y=Math.random()*w,"imperial"===v.faction?(v.x=Math.random()*p*.25,v.currentAngle=0):(v.x=.75*p+Math.random()*p*.25,v.currentAngle=Math.PI),v.lives&&v.lives<=0&&(v.isAlive=!1)}function f(){v.isAlive&&(e.translate(v.x,v.y),e.rotate(v.currentAngle),e.drawImage(m,-v.widthHalf,-v.heightHalf,v.width,v.height),e.rotate(-v.currentAngle),e.translate(-v.x,-v.y),v.isAI||(e.strokeStyle="rgba(255, 255, 255, 0.5)",e.lineWidth=1,e.beginPath(),e.arc(v.x,v.y,1.5*v.size,0,2*Math.PI),e.stroke()),v.isHit&&(e.strokeStyle="rgba("+v.factionColor+", 0.5)",e.lineWidth=2,e.beginPath(),e.arc(v.x,v.y,1.5*v.size,0,2*Math.PI),e.stroke(),e.fillStyle="rgba("+v.factionColor+", 0.25)",e.fill(),v.isHit=!1))}function c(){if(v.isAlive){v.isAI&&d(),g.left&&v.rotationSpeed>-v.rotationSpeedMax&&(v.rotationSpeed-=v.rotationThrust),g.right&&v.rotationSpeed<v.rotationSpeedMax&&(v.rotationSpeed+=v.rotationThrust),g.left||g.right||(v.rotationSpeed*=.5),v.speed*=.95,g.up&&v.speed<v.speedMax&&(v.speed+=v.thrust),g.down&&v.speed>0&&(v.speed-=.1*v.thrust),g.shoot&&v.weaponCoolDown<=0&&(r(v),v.weaponCoolDown=v.maxCoolDown),v.weaponCoolDown--,v.currentAngle+=v.rotationSpeed,v.currentAngle>2*Math.PI&&(v.currentAngle-=2*Math.PI),v.x+=Math.cos(v.currentAngle)*v.speed,v.y+=Math.sin(v.currentAngle)*v.speed;var e=1.25*v.width,t=1.25*v.height;v.x<-e?v.x=p+e:v.x>p+e&&(v.x=-e),v.y<-t?v.y=w+t:v.y>w+t&&(v.y=-t)}else v.respawnTimer--,v.respawnTimer<=0&&l()}function d(){if(g.shoot=g.left=g.right=!1,v.target&&v.target.attributes.isAlive&&Math.random()>.01){i.distanceBetween(v,v.target.attributes);g.up=!0;var e=Math.atan2(v.target.attributes.y-v.y,v.target.attributes.x-v.x),t=v.currentAngle-e;t>Math.PI&&(t=-(2*Math.PI-t));var n=.01*Math.PI;t>n?g.left=!0:-n>t?g.right=!0:g.shoot=!0}else v.target=o(b)}function h(){p=window.innerWidth,w=window.innerHeight}var p,w,t=t||{},v={playerName:t.playerName,health:10,healthMax:10,score:0,lives:1,isAlive:!0,isHit:!1,isAI:null===n,faction:t.name,factionColor:t.color,size:0,width:20,height:19,x:.5*window.innerWidth,y:.5*window.innerHeight,vx:0,vy:0,speed:0,speedMax:5,thrust:.2,weaponDamage:1,rotationSpeed:0,rotationSpeedMax:.04,rotationThrust:.002,currentAngle:0,weaponCoolDown:0,maxCoolDown:30,respawnTimer:0};"imperial"===t?(v.health=10,v.rotationThrust=.002,v.weaponDamage=2):(v.health=15,v.weaponDamage=2.5),v.widthHalf=v.width/2,v.heightHalf=v.height/2,v.size=Math.max(v.widthHalf,v.heightHalf);var g={up:!1,down:!1,left:!1,right:!1,shoot:!1},m=new Image;"imperial"===t.name?m.src="../img/imperial/tie_fighter_small.png":"rebel"===t.name?m.src="../img/rebel/x_wing_small.png":m.src="../img/x_wing.png",v.isAI?v.target=null:(window.addEventListener("keydown",a),window.addEventListener("keyup",s));var b={attributes:v,draw:f,update:c,resize:h,killed:u,respawn:l};return b}},{"../utils/Helpers":17}],11:[function(e,t,n){var i=e("number-to-words"),r=e("./Player");t.exports=function(e,t,n){function o(){for(var e=0;l>e;e++){var t=f[e];t.update()}}function a(){for(var e=0;l>e;e++){var t=f[e];t.draw()}}function s(){for(var e=0;l>e;e++){var t=f[e];t.resize()}}function u(e){for(var t=0;l>t;t++)e(f[t],t)}var l=30,f=[],c=["rebel","imperial"];d=[];for(var d=[{up:87,down:83,left:65,right:68,shoot:32}],h=0;l>h;h++){var p="Red "+i.toWords(h),w="TIE "+i.toWords(h),v={name:c[h%2]};"rebel"===v.name?(v.color="51, 204, 255",v.playerName=p):(v.color="255, 51, 0",v.playerName=w);var g=new r(e,v,void 0===d[h]?null:d[h],t,n);f.push(g)}return{update:o,draw:a,resize:s,each:u}}},{"./Player":10,"number-to-words":2}],12:[function(e,t,n){var i=e("./Animation");t.exports=function(e,t){function n(e,t,n){var i=a[e];if(void 0===i)console.warn("sprite.requestAnimation(No such definition!)",e);else{var r=!1;i.pool.each(function(e,t){return e.inUse?void 0:(r=e,!0)}),r&&(r.inUse=!0,r.x=t,r.y=n,r.play(0))}}function r(){t.each(function(t,n){var i={x:0,y:0,width:t.size,height:t.size},r={x:0,y:0,width:t.sizeDest,height:t.sizeDest};t.pool.each(function(n){if(n.inUse){var o=Math.floor(n.time/1e3*n.definition.framerate);i.x=o%n.definition.colCount*n.definition.size,i.y=Math.floor(o/n.definition.colCount)*n.definition.size,r.x=n.x-.5*t.sizeDest,r.y=n.y-.5*t.sizeDest,e.drawImage(t.image,i.x,i.y,i.width,i.height,r.x,r.y,r.width,r.height)}})})}function o(e){var n=e-s;s=e,t.each(function(e,t){e.pool.each(function(e){e.inUse&&(e.time+=n,e.time>=e.definition.duration&&(e.inUse=!1))})})}var t=t||[],a={},s=0;return t.each(function(e,t){a[e.id]=e;var n=new Image;n.addEventListener("load",function(){e.width=n.width,e.height=n.height,e.colCount=e.width/e.size,e.rowCount=e.height/e.size,e.loaded=!0,e.framesTotal=e.width*e.height/(e.size*e.size),e.duration=e.framesTotal/e.framerate*1e3,console.log(e)}),n.addEventListener("error",function(e){console.warn("Can't find image source!",e.path[0])}),n.src=e.src,e.image=n,e.width=null,e.height=null,e.loaded=!1,e.framePerUpdate=e.framerate/60,e.pool=[];for(var r=0;r<e.count;r++)e.pool.push(new i(e))}),{requestAnimation:n,draw:r,update:o}}},{"./Animation":5}],13:[function(e,t,n){var i=e("raf"),r=e("../utils/Helpers"),o=e("./Particles"),a=e("./Players"),s=e("./Bullets"),u=e("./Sprites");t.exports=function(){function e(e){b.create(e)}function t(e){var t=0,n=null;return m.each(function(i,o){if(e.attributes.faction!==i.attributes.faction&&i.attributes.isAlive){var a=r.distanceBetween(e.attributes,i.attributes);(null===n||t>a)&&(n=i,t=a)}}),n}function n(){h=w.width=window.innerWidth,p=w.height=window.innerHeight,g.resize(),m.resize(),b.resize()}function l(){m.each(function(e){e.respawn()})}function f(e){g.update(),m.update(),b.update(),y.update(e),c(),b.remove(),g.draw(),b.draw(),m.draw(),y.draw(),d(),i(f)}function c(){m.each(function(e,t){e.attributes.isAlive&&b.each(function(t,n){if(e.attributes.faction!==t.attributes.owner.faction){var i=r.distanceBetween(e.attributes,t.attributes);i<e.attributes.size+t.attributes.size&&(t.attributes.isAlive=!1,e.attributes.health-=t.attributes.owner.weaponDamage,e.attributes.isHit=!0,e.attributes.health<=0&&(y.requestAnimation("expolsion",e.attributes.x,e.attributes.y),e.killed(),x[t.attributes.owner.faction]++,t.attributes.owner.score++))}})})}function d(){v.textBaseline="bottom",v.fillStyle="rgba(51, 204, 255, 0.5)",v.fillText("Rebel: "+x.rebel,10,20),v.textBaseline="bottom",v.fillStyle="rgba(255, 51, 0, 0.5)",v.fillText("Imperial: "+x.imperial,120,20)}var h=window.innerWidth,p=window.innerHeight,w=document.createElement("canvas"),v=w.getContext("2d");r.attributes(w,{width:h,height:p,style:"margin: 0; display: block;"});var g=new o(v),m=new a(v,e,t),b=new s(v),y=new u(v,[{id:"expolsion",src:"/img/sprites/explosion.png",size:64,sizeDest:32,count:20,framerate:60}]),x={rebel:0,imperial:0};return n(),l(),f(),{canvas:w,resize:n}}},{"../utils/Helpers":17,"./Bullets":7,"./Particles":9,"./Players":11,"./Sprites":12,raf:3}],14:[function(e,t,n){t.exports={imperialLaser:{src:"../audio/imperial/laser.wav",id:"imperial"},rebelLaser:{src:"../audio/imperial/laser.wav",id:"rebel"}}},{}],15:[function(e,t,n){Array.prototype.each=function(e){for(var t=0;t<this.length&&!e(this[t],t);t++);};var i=e("./components/Stage")(),r=document.getElementById("container");r.appendChild(i.canvas),window.addEventListener("resize",i.resize)},{"./components/Stage":13}],16:[function(e,t,n){var i=e("../data/sounds.json");t.exports=function(){var e=[];for(var t in i)if(i.hasOwnProperty(t)){var n=i[t];e.push(n)}return{}}},{"../data/sounds.json":14}],17:[function(e,t,n){t.exports={attributes:function(e,t){for(var n in t)e.setAttribute(n,t[n])},distanceBetween:function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}}},{}]},{},[15]);